{% extends 'admin/include/header.twig' %}

{% block body %}

    <h1>Dodaj użytkownika</h1>
    {% autoescape %}
        {{ validation|raw }}
    {% endautoescape %}
    <form class="add_user" action="{{ base_url }}users/create_user" method="POST" id="add_user">

        <div class="form-group">
            <label for="Login">Login</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Podaj Login....">
        </div>
        <div class="form-group">
            <label for="Password">Hasło</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Podaj hasło...">
        </div>
        <div class="form-group">
            <label for="retry_password">Powtórz hasło</label>
            <input type="password" class="form-control" id="password_retry" name="password_retry" placeholder="Powtórz hasło...">
        </div>
        <div class="form-group">
            <label for="emial">Adres e-mail</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Podaj email...">
        </div>
        <div class="form-group">
            <label for="user_group">Grupa użytkownika</label>
            <select class="form-control" name="group">
                <option value="0">Moderator</option>
                <option value="1">Administrator</option>
                <option value="2">Użytkownik</option>
            </select>
        </div>
        <button type="submit" class="btn btn-default" id="add_user_button">Dodaj użytkownika</button>

    </form>




{% endblock %}

{% block javascripts %}
<script>

    $("input").on("blur",function () {
        if($('#'+this.id).val()==""){
            console.log("wartosc jest pusta "+ this.id);
            $('#'+this.id+'_alert').remove();
            $('#'+this.id).after('<div id="'+this.id+'_alert" class="alert alert-warning">Musisz uzupełnić te pole</div>');
            $('button').attr("disabled", true);
        }else{
            $('#'+this.id+'_alert').remove();
            $('button').attr("disabled", false);
            console.log("OK");
        }
    })

        $("form").submit(function () {
                if($('#username').val()=="" || $('#password').val()=="" || $('#password_retry').val()=="")
                {
                    $('#add_user_button_alert').remove();
                    $('#add_user_button').after('<div id="add_user_button_alert" class="alert alert-danger">Musisz uzupełnić wymagane pola</div>');
                    return false;
                }
                else {
                    return true;
                }

            });


</script>

{% endblock %}